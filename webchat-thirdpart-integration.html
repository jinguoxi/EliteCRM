<h1>WebChat第三方客户端接入说明</h1>
<p>5/24/2014 3:36:09 PM </p>
<h3>EliteWebChat提供整套从客服端到客户端的界面与展示解决方案，同时也可以支持与第三方客户端的对接。其中成功案例就有与小米的米聊对接，与livebot的微信服务对接等。</h3>
<h2>一. 第三方客户端对接接口说明</h2>
<p>接口才用http协议，包括了webchat端提供的接口与第三方提供的接口，数据传输使用json格式。
下面从模拟整个聊天过程的方式来介绍这些接口：</p>
<ul>
<li>客户从网页或者微信端发出聊天请求： </li>
</ul>
<blockquote>
<pre><code>http://xxxxx/EliteWebChat/createcon.do
发送参数：
{
    clientId: &quot;xxxxxxxxx&quot;,//客户的唯一标示
    nickname: &quot;lori&quot;,//客户昵称（微信昵称）
    time: 1400913140127//发出请求的时间戳
}
返回参数：
{
    result: 1,//请求发送成功（1）或失败（0）
    message: &quot;success&quot;,//成功或失败的消息
    queueLength: 3//队列长度
}
</code></pre>

</blockquote>
<ul>
<li>webchat端路由请求到某个客服后，创建出聊天会话，通知第三方可以开始聊天了</li>
</ul>
<blockquote>
<pre><code>http://xxxxx/ThirdPartService/create
发送参数：
{
result：1,
message:&quot;success&quot;,
agentId:&quot;SELITE&quot;,
agentName:&quot;Elite&quot;,
sessionId: 1299,
time: 1400913830109
}
返回参数:
{
result:1,
message:&quot;success&quot;
}
</code></pre>

</blockquote>
<ul>
<li>客户发送消息给客服</li>
</ul>
<blockquote>
<pre><code>http://xxxxx/EliteWebChat/getmsg.do
发送参数:
{
    sessionId: 1299,
    agentId: &quot;SELITE&quot;,
    clientId: &quot;xxxxxxxxxx&quot;,
    time: 1400913830109,
    type: &quot;text&quot;,//消息类型，可能存在image,voice,location,text等
    content: &quot;你好，请问xxxxx&quot;
}
返回参数：
{
    result: 1,
    message: &quot;&quot;
}
</code></pre>

</blockquote>
<ul>
<li>客服发送消息给客户</li>
</ul>
<blockquote>
<pre><code>http://xxxxx/ThirdPartService/msg
{
sessionId: 1299,
agentId: &quot;SELITE&quot;,
clientId: &quot;xxxxxxxxxx&quot;,
time: 1400913830109,
content: &quot;xxxxxxxxxx，xxxxx&quot;,
type: &quot;text&quot;//客服发送送出的微信消息目前只支持文字信息
}
返回参数：
{
result: 1,
message: &quot;success&quot;
}
</code></pre>

</blockquote>
<ul>
<li>客户结束聊天</li>
</ul>
<blockquote>
<pre><code>http://xxxxx/EliteWebChat/closecon.do
发送参数:
{
sessionId: 1299,
time: 1400913830109
}
返回参数：
{
result:1,
message:&quot;success&quot;
}
</code></pre>

</blockquote>
<ul>
<li>客服关闭聊天会话</li>
</ul>
<blockquote>
<pre><code>http://xxxxx/ThirdPartService/close
发送参数:
{
sessionId: 1299,
agentId: &quot;SELITE&quot;,
clientId: &quot;xxxxxxxxxx&quot;,
time: 1400913830109
}
返回参数:
{
result: 1,
message: &quot;success&quot;
}
</code></pre>

</blockquote>
